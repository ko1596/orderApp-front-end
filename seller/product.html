<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../stylesheets/bootstrap.min.css">  
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <title>上下架</title>
</head>
<body class="col-md-6">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <a class="navbar-brand" >訂餐系統</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarText">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="../seller/product.html">商品上下架</a>
            </li>
          </ul>
        </div>
      </nav>  
      <div class="col-md-6">  
        <div class="panel panel-default" id="app" >  
          <div class="panel-body form-horizontal"> 
            <div class="form-group">  
              <label class="col-md-2 control-label">商品名稱: </label>  
              <div class="col-md-10">  
                  <input type="text" class="form-control" v-model="nproduct.name"/>  
              </div>  
          </div>  
          <div class="form-group">  
              <label class="col-md-2 control-label">價格: </label>  
              <div class="col-md-10">  
                  <input type="text" class="form-control" v-model="nproduct.price">  
              </div>  
          </div>  
          <div class="form-group">  
              <label class="col-md-2 control-label">類型: </label>  
              <div class="col-md-10">
                <input type="text" class="form-control" v-model="nproduct.type">     
              </div>  
              <!-- test:<input list="Difficulty" size="10" name="Difficulty" id="textfield" />
                      <datalist id="Difficulty">
                          <option value="EASY">
                          <option value="NORMAL">
                      </datalist>-->
          <div class="form-group">  
              <label for=""></label>  
              <button class="col-md-offset-2" @click="addproduct">新增</button>  
          </div>   
        <!-- 資料表格 -->
        <div class = "panel-body">
          <table class="table text-center">
            <thead>
              <tr>
                  <th class="text-center">商品名稱</td>
                  <th class="text-center">價格</td>
                  <th class="text-center">類型</td>
              </tr>
            </thead>
            <tbody>
              <tr v-for="product in products">
                  <td>{{product.name}}</td>
                  <td>{{product.price}}</td>
                  <td>{{product.type}}</td>
                  <td><button @click="deleteProduct($index)">刪除</button></td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <button class="col-md-offset-2" @click="doneproduct">上傳</button>
      </form>
      </div>
        </div>
      </div>
    </div>
</body>
<script src="../js/product.js"></script>  
<script>
  var app = new Vue({
    el: '#app',
    data: {
      nproduct:{
        name: '',
        price: '',
        type: ''
      },
      products:[{
        name: 'test',
        price: 'test',
        type: 'test'
      }]
    },
    methods:{
      addproduct: function(){
        this.products.push(this.nproduct); 
        this.nproduct = {name: '', price: '', type: ''}
      },
      deleteProduct: function(index){    
        this.products.splice(index,1);  
      },
      doneproduct: function(){
        // axios.get('http://118.150.129.183:8080/')
        // .then(function (response) {
        //   console.log(response);
        // })
        // .catch(function (error) {
        //   console.log(error);
        // });
        // axios.post('http://118.150.129.183:8080/login', {
        //   params: {
        //     account:"qwdfst",
        //     password:"456"
        //   }
        // })
        // .catch(function (error) {
        //   console.log(error);
        // });
          $.post("http://118.150.129.183:8080/login",
          {
            account:"redsesdgfa",
            password:"456"
          })
          .done(function(){
            alert("登入成功")
          })
          .fail(function(){
            alert("登入失敗")
          });
      }
    }  
  })

  </script>
</html>